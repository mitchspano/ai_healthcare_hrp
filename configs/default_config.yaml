# Default configuration for the diabetes LSTM pipeline
# This file will be populated with actual configuration parameters

# Data configuration
data:
  raw_data_path: "data/raw"
  processed_data_path: "data/processed"
  dataset_url: "https://prod-dcd-datasets-cache-zipfiles.s3.eu-west-1.amazonaws.com/gk9m674wcx-1.zip"

# Logging configuration
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/pipeline.log"

# Model configuration
model:
  sequence_length: 60
  prediction_horizon: 1
  lstm_units: 128
  dropout_rate: 0.2
  learning_rate: 0.001

# Training configuration
training:
  batch_size: 32
  epochs: 100
  validation_split: 0.2
  early_stopping_patience: 10

# Random seed for reproducibility
random_seed: 42

# Data validation configuration
validation:
  report_output_dir: "reports"
  zscore_threshold: 3.0
  contamination: 0.1 # For isolation forest
  required_columns:
    - "EventDateTime"
    - "DeviceMode"
    - "BolusType"
    - "Basal"
    - "CorrectionDelivered"
    - "TotalBolusInsulinDelivered"
    - "FoodDelivered"
    - "CarbSize"
    - "CGM"

# Data preprocessing configuration
preprocessing:
  missing_values:
    strategies:
      CGM: "interpolation"
      Basal: "forward_fill"
      TotalBolusInsulinDelivered: "zero_fill"
      CorrectionDelivered: "zero_fill"
      FoodDelivered: "zero_fill"
      CarbSize: "zero_fill"
    interpolation_method: "linear"
    max_gap_minutes: 30

  outliers:
    detection_methods: ["iqr", "zscore"]
    treatment_method: "clip"
    zscore_threshold: 3.0
    iqr_multiplier: 1.5
    contamination: 0.1
    column_settings:
      CGM:
        min_value: 40
        max_value: 400
        detection_methods: ["iqr", "zscore", "domain_specific"]
        treatment_method: "clip"

  cleaning:
    duplicate_strategy: "keep_last"
    time_tolerance_seconds: 60
    participant_column: "participant_id"

  resampling:
    target_frequency: "5min" # 5 minutes
    participant_column: "participant_id"
    aggregation_methods:
      CGM: "mean"
      Basal: "mean"
      TotalBolusInsulinDelivered: "sum"
      CorrectionDelivered: "sum"
      FoodDelivered: "sum"
      CarbSize: "sum"
